<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>MAX7219_7SEG_RPI: README</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">MAX7219_7SEG_RPI
   &#160;<span id="projectnumber">1.0.0</span>
   </div>
   <div id="projectbrief">Raspberry PI library for a MAX7219 seven segment  display</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',false,false,'search.php','Search');
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">README </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a href="https://gavinlyonsrepo.github.io/"></a> <a href="https://gavinlyonsrepo.github.io//feed.xml"></a> <a href="https://www.paypal.com/paypalme/whitelight976"></a></p>
<h1>TM1638plus RPI</h1>
<h2>Table of contents </h2>
<ul>
<li><a href="#overview">Overview</a></li>
<li><a href="#installation">Installation</a></li>
<li><a href="#test">Test</a></li>
<li><a href="#software">Software</a></li>
<li><a href="#hardware">Hardware</a></li>
<li><a href="#notes">Notes</a></li>
</ul>
<h2>Overview </h2>
<ul>
<li>Name: MAX7219_7SEG_RPI</li>
<li>Author: Gavin Lyons.</li>
<li>Description:</li>
</ul>
<p>A Raspberry pi library to display data on a 8-digit TM1638 seven segment module. Dynamic install-able system level Raspberry Pi C++ library.</p>
<ul>
<li>Developed on<ol type="1">
<li>Raspberry PI 3 model b,</li>
<li>C++ , complier g++ (Raspbian 8.3.0-6+rpi1) 8.3.0</li>
<li>Raspbian 10 buster OS , armv7l Linux 5.10.103-v7+</li>
<li>bcm2835 Library 1.71 (Dependency: used for GPIO control and delays)</li>
</ol>
</li>
</ul>
<h2>Installation </h2>
<ol type="1">
<li>Install the dependency bcm2835 Library if not installed<ul>
<li>The bcm2835 library is a dependency and provides delays and GPIO control.</li>
<li>Install the C libraries of bcm2835, <a href="http://www.airspayce.com/mikem/bcm2835/">Installation instructions here</a></li>
</ul>
</li>
<li>Download the MAX7219_7SEG_RPI library<ul>
<li>Open a Terminal in a folder where you want to download,build &amp; test library</li>
<li>Run following command to download from github.</li>
</ul>
</li>
</ol>
<div class="fragment"><div class="line">curl -sL https://github.com/gavinlyonsrepo/MAX7219_7SEG_RPI/archive/1.0.tar.gz | tar xz</div></div><!-- fragment --><ol type="1">
<li>Run "make" to run the makefile in base folder to install library, it will be installed to usr/lib and usr/include</li>
</ol>
<div class="fragment"><div class="line">cd MAX7219_7SEG_RPI-1.0</div><div class="line">make</div><div class="line">sudo make install</div></div><!-- fragment --><h2>Test </h2>
<p>Wire up your Display. Next step is to test LED display and the just installed library with an example file.</p>
<p>There are five examples files. The default example file is model 1 "hello world". To decide which one the makefile(In examples folder) builds simply edit "SRC" variable at top of the makefile(In examples folder). i.e. SRC=src/HELLOWORLD_Model1 in the "User SRC directory Option Section" at top of file. Pick an example "SRC" directory path and ONE ONLY. Comment out the rest.</p>
<table class="doxtable">
<tr>
<th>List No </th><th>example file name </th><th>Model Num </th><th>Desc  </th></tr>
<tr>
<td>1 </td><td>HELLOWORLD_Model1 </td><td>1 </td><td>Hello world </td></tr>
<tr>
<td>2 </td><td>HELLOWORLD_Model2 </td><td>2 </td><td>Hello world </td></tr>
<tr>
<td>3 </td><td>HELLOWORLD_Model3 </td><td>3 </td><td>Hello world </td></tr>
<tr>
<td>4 </td><td>TEST_Model1 </td><td>1 </td><td>test routines </td></tr>
<tr>
<td>5 </td><td>TEST_Model2 </td><td>2 </td><td>test routines </td></tr>
<tr>
<td>6 </td><td>TEST_Model3 </td><td>3 </td><td>test routines </td></tr>
</table>
<p>Next enter the examples folder and run the makefile in THAT folder, This makefile builds the examples file using the just installed library. and creates a test exe file in "bin". Be sure to use "sudo" as the bcm2835 requires root permissions by default <a href="http://www.airspayce.com/mikem/bcm2835/">see here for more details on that</a></p>
<div class="fragment"><div class="line">cd examples/</div><div class="line">make</div><div class="line">sudo bin/test</div></div><!-- fragment --> <h2>Software </h2>
<p>This library is a port of my Arduino Library. There at link below you will find the full documentation including the HTML API(generated by doxygen), which is similar to RPI version except ::</p>
<ol type="1">
<li>Examples files for Arduino are .ino files.</li>
<li>High freq data member flag is not needed in RPI library.</li>
<li>The text alignment enum has an extra enumerator for leading zeros.</li>
<li>Constructor has GPIO parameters in base class.</li>
<li>In file dependency graphs ,High level file includes will differ. eg "#include &lt;bcm2835.h&gt;" will be missing.</li>
<li>Model 3 code is in a separate file and separate sub-class of Model1.</li>
<li>Enumerators and constants are used instead of #defines</li>
</ol>
<p><a href="https://github.com/gavinlyonsrepo/TM1638plus">Arduino library github Link</a></p>
<p>The RPI version is also documented for Doxygen so an API can be easily created for this library port too.</p>
<h2>Hardware </h2>
<p>Connections to RPI:</p>
<ol type="1">
<li>GPIO = STB = Strobe</li>
<li>GPIO = CLK = Clock</li>
<li>GPIO = DIO = Data input / output</li>
<li>GND</li>
<li>VCC 3.3V (or 5V see Note)</li>
</ol>
<p>NOTE : If VCC is set to 5V, level shift GPIO to 3.3V or damage could result.</p>
<p>This library supports three variants of the TM1638, which for purposes of this documentation, will be named Model 1 ,Model 2 and Model 3. Pictured at from left to right.</p>
<table class="doxtable">
<tr>
<th>Model No </th><th>Module Name </th><th>LEDS </th><th>Push buttons  </th></tr>
<tr>
<td>Model 1 </td><td>TM1638 LED &amp; KEY </td><td>8 red only </td><td>8 </td></tr>
<tr>
<td>Model 2 </td><td>TM1638 KEYS, QYF </td><td>0 </td><td>16 </td></tr>
<tr>
<td>Model 3 </td><td>TM1638 V1.3 or LKM1638 </td><td>8 bi color, red and green </td><td>8 </td></tr>
</table>
<div class="image">
<img src="https://github.com/gavinlyonsrepo/TM1638plus/blob/master/extra/images/tm16383.jpg" alt=" module pics "/>
</div>
<h2>Notes </h2>
<p>Note A : TM_Comm_Delay Communications optional delay</p>
<p>It may be necessary to adjust the constant _TM_CommDelay in the TM1638plus_common.h file. It is Microsecond delay used in communications clocking, it is currently set to 1, It can be set to 0 or higher. On a different CPU Freq RPI it may be necessary to increase/decrease this. </p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
