<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>displaylib_16bit_PICO: Advanced Buffer Mode Readme</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">displaylib_16bit_PICO<span id="projectnumber">&#160;2.1.0</span>
   </div>
   <div id="projectbrief">Driver for 16-bit colour graphics displays,  Rpi PICO  library.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

</div><!-- top -->
<div><div class="header">
  <div class="headertitle"><div class="title">Advanced Buffer Mode Readme</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="autotoc_md0"></a> Advanced buffer mode allows the library to write to a global screen buffer (<code>_screenBuffer</code>) instead of directly writing to the VRAM of the display. This mode is off by default but can be enabled for specific use cases where buffering is advantageous.</p>
<p>Advanced buffer mode offers several key benefits. It enables double buffering, where all drawing operations are first performed in memory and then written to the display in a single operation. With batch drawing, multiple graphics operations can be completed before updating the screen, improving rendering efficiency. The memory-resident buffer also allows for custom effects like fading or blending to be applied before display. Additionally, since memory operations are faster than direct display writes, this approach leads to optimized performance for applications with frequent updates.</p>
<p>However, it comes with limitations. It requires significant heap memory and flushing the buffer to the display can introduce a performance overhead. Compatibility is also a concern on memory-constrained devices. Use advanced buffer mode when you need complex rendering, visual effects, or performance optimizations. For simpler applications where memory is limited, direct display drawing may be more suitable. Bear in mind many functions in normal mode have some form of local buffered writes already.</p>
<p>Some examples of SRAM usage for selected display sizes and PICO's.</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Display size bytes   </th><th class="markdownTableHeadNone">SRAM PICO   </th><th class="markdownTableHeadNone">SRAM % used    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">96x64 12,288   </td><td class="markdownTableBodyNone">RP2040 264 KB   </td><td class="markdownTableBodyNone">5    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">96x64 12,288   </td><td class="markdownTableBodyNone">RP2350 512 KB   </td><td class="markdownTableBodyNone">2    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">240x320 153,600   </td><td class="markdownTableBodyNone">RP2040 264 KB   </td><td class="markdownTableBodyNone">57    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">240x320 153,600   </td><td class="markdownTableBodyNone">RP2350 512 KB   </td><td class="markdownTableBodyNone">30   </td></tr>
</table>
<h1><a class="anchor" id="autotoc_md1"></a>
Enabling Advanced Buffer Mode</h1>
<p>To enable advanced buffer mode, you need to define the macro <code>dislib16_ADVANCED_SCREEN_BUFFER_ENABLE</code>. This macro is located in the file <code><a class="el" href="displaylib__16__graphics_8hpp.html" title="header file for graphics library. This file handles the graphic methods">displaylib_16_graphics.hpp</a></code> (line 26 USER OPTION 2). By default, this macro is commented out or undefined. Once enabled, the library will use the <code>_screenBuffer</code> for many drawing operations instead of writing directly to the display VRAM.</p>
<h1><a class="anchor" id="autotoc_md2"></a>
Usage</h1>
<ol type="1">
<li>setBuffer, sets the buffer allocates memory for a buffer to cover entire screen, call at setup of Display operations.</li>
<li>destroyBuffer, destroys buffer de-allocates memory, call at end of Display operations.</li>
<li>clearBuffer, fills buffer with a colour, by default black.</li>
<li>writeBuffer, writes buffer in a single SPI buffered write to screen.</li>
</ol>
<h1><a class="anchor" id="autotoc_md3"></a>
Functions</h1>
<p>Once enabled The following functions will write to screen Buffer instead of VRAM of display.</p>
<ol type="1">
<li>drawPixel()</li>
<li>All Bitmap functions.</li>
<li>All Draw text functions IF <b>textCharPixelOrBuffer = true</b></li>
</ol>
<p>The situation with graphic functions is complicated as some use fast draw methods of drawFastVLine() and drawFastHLine(). and fillRectBuffer uses a local buffer in function to write to display VRAM. So depending on the graphic function code may write to screenBuffer and/or VRAM. Note fillRectBuffer is wrapped by fillScreen. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8
</small></address>
</body>
</html>
