<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>displaylib_16bit_PICO: ILI9341 LCD TFT Readme</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">displaylib_16bit_PICO<span id="projectnumber">&#160;2.2.0</span>
   </div>
   <div id="projectbrief">Driver for 16-bit colour graphics displays,  Rpi PICO  library.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

</div><!-- top -->
<div><div class="header">
  <div class="headertitle"><div class="title">ILI9341 LCD TFT Readme</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="autotoc_md21"></a> <a href="https://github.com/gavinlyonsrepo/Display_Lib_RPI/blob/main/extra/images/ili9341.jpg"><img src="https://github.com/gavinlyonsrepo/Display_Lib_RPI/blob/main/extra/images/ili9341.jpg" alt="Image TFT" class="inline"/></a></p>
<h1><a class="anchor" id="autotoc_md22"></a>
Table of contents</h1>
<ul>
<li>Overview</li>
<li>Software<ul>
<li>User Options</li>
<li>File system</li>
<li>Bitmap</li>
<li>Color codes</li>
</ul>
</li>
<li>Hardware</li>
<li>Output</li>
</ul>
<h1><a class="anchor" id="autotoc_md23"></a>
Overview</h1>
<ul>
<li>Name: ILI9341</li>
<li>Description:</li>
</ul>
<p>C++ Raspberry pi PICO library for a TFT SPI LCD,ILI9341 Driver</p>
<h1><a class="anchor" id="autotoc_md24"></a>
Software</h1>
<h2><a class="anchor" id="autotoc_md25"></a>
User options</h2>
<p>In the example files, there are 3 sections in "Setup()" function where user can make adjustments.</p>
<ul>
<li>User Option 0 Setup() SPI Settings</li>
<li>User Option 1 Setup() Setup the GPIO</li>
<li>User Option 2 Setup() Screen Setup</li>
</ul>
<p>*User Option SPI Settings *</p>
<p>Here the user can pass the SPI Bus freq in kiloHertz. Max SPI speed on the PICO is 62.5Mhz. 2nd parameter is the SPI interface(spi0 spi1 etc). If users wants software SPI just call this method with just one argument for the optional GPIO software uS delay, which by default is zero. Setting this higher can be used to slow down Software SPI which may be beneficial in some setups. <br  />
</p>
<p>*User Option Setup the GPIO pins</p>
<p>Set the five GPIO pins if using Hardware SPI clock and data pins will be tied to the chosen interface eg Spi0 CLK=18 DIN=19). The reset pin is optional if your display/hat uses software reset , set to -1 to 'disable'.</p>
<p>*User Option Screen size *</p>
<p>User can adjust screen pixel height, screen pixel width.</p>
<h2><a class="anchor" id="autotoc_md26"></a>
File system</h2>
<p>There are example files included. User picks the one they want by editing the CMakeLists.txt :: add_executable(${PROJECT_NAME} section. Comment in one path and one path ONLY.</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">#   </th><th class="markdownTableHeadNone">example file name   </th><th class="markdownTableHeadNone">Description    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">1   </td><td class="markdownTableBodyNone">hello_world   </td><td class="markdownTableBodyNone">Basic use case    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">2   </td><td class="markdownTableBodyNone">text_graphic_functions   </td><td class="markdownTableBodyNone">Tests text,graphics &amp; function testing    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">3   </td><td class="markdownTableBodyNone">bmp_data   </td><td class="markdownTableBodyNone">bitmap + FPS testing    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">4   </td><td class="markdownTableBodyNone">demo   </td><td class="markdownTableBodyNone">A demo   </td></tr>
</table>
<h2><a class="anchor" id="autotoc_md27"></a>
Bitmap</h2>
<p>Functions to support drawing bitmaps</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Function Name   </th><th class="markdownTableHeadNone">Colour support   </th><th class="markdownTableHeadNone">Pixel max size KiB   </th><th class="markdownTableHeadNone">Note    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">drawBitmap   </td><td class="markdownTableBodyNone">bi-colour array   </td><td class="markdownTableBodyNone">18.75   </td><td class="markdownTableBodyNone">Data horizontally addressed    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">drawBitmap8Data   </td><td class="markdownTableBodyNone">8 bit color RRRGGGBB   </td><td class="markdownTableBodyNone">75   </td><td class="markdownTableBodyNone">Converted by software to 16-bit color    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">drawBitmap16   </td><td class="markdownTableBodyNone">16 bit color 565 BMP files or array   </td><td class="markdownTableBodyNone">150   </td><td class="markdownTableBodyNone">---&mdash;    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">drawSprite   </td><td class="markdownTableBodyNone">16 bit color 565 array   </td><td class="markdownTableBodyNone">150   </td><td class="markdownTableBodyNone">Does not use a buffer , draws pixel by pixel , ignores background chosen color   </td></tr>
</table>
<ol type="1">
<li>Bitmap Size (in KiB)= Image Width×Image Height×Bits Per Pixel(8×1024)</li>
<li>Pixel size column assumes 240 by 320 screen.</li>
<li>The data array for 1 is created from image files using file data conversion tool <a href="https://javl.github.io/image2cpp/">link</a></li>
<li>The data array for 2-4 is created from BMP files using file data conversion tool <a href="https://notisrac.github.io/FileToCArray/">link</a></li>
</ol>
<h1><a class="anchor" id="autotoc_md28"></a>
Hardware</h1>
<p>Tested and developed on:</p>
<ul>
<li>Size 2.4 inch SPI Serial IPS color TFT LCD</li>
<li>Resolution: 240 (H) RGB x 320 (V)</li>
<li>Color Depth: 262K/65K (65K used)</li>
<li>Control chip:ILI9341</li>
<li>Display area 27.972 (H) x 32.634 (V)</li>
<li>Logic voltage 3.3V</li>
<li>Touch panel with XPT2046 IC</li>
</ul>
<p>Connections as setup in main.cpp test file.</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">PinNum   </th><th class="markdownTableHeadNone">Pin description   </th><th class="markdownTableHeadNone">RPI   </th><th class="markdownTableHeadNone">note    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">1   </td><td class="markdownTableBodyNone">VCC   </td><td class="markdownTableBodyNone">VCC   </td><td class="markdownTableBodyNone">3.3 or 5V ,CAUTION your display must have 3.3V regulator on back to connect to 5V    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">2   </td><td class="markdownTableBodyNone">GND   </td><td class="markdownTableBodyNone">GND   </td><td class="markdownTableBodyNone"></td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">3   </td><td class="markdownTableBodyNone">CS   </td><td class="markdownTableBodyNone">SPICE0   </td><td class="markdownTableBodyNone">TFT Chip select    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">4   </td><td class="markdownTableBodyNone">RESET   </td><td class="markdownTableBodyNone">GPIO25   </td><td class="markdownTableBodyNone">Reset, Use any GPIO for this, If no reset pin, pass -1 in here &amp; display will use software rst    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">5   </td><td class="markdownTableBodyNone">DC   </td><td class="markdownTableBodyNone">GPIO24   </td><td class="markdownTableBodyNone">Data or command, Use any GPIO for this line    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">6   </td><td class="markdownTableBodyNone">SDI(MOSI)   </td><td class="markdownTableBodyNone">SPIMOSI   </td><td class="markdownTableBodyNone"></td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">7   </td><td class="markdownTableBodyNone">SCLK   </td><td class="markdownTableBodyNone">SPICLK   </td><td class="markdownTableBodyNone"></td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">8   </td><td class="markdownTableBodyNone">LED   </td><td class="markdownTableBodyNone">VCC   </td><td class="markdownTableBodyNone">CAUTION Your display may need current limit resistor    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">9   </td><td class="markdownTableBodyNone">SDO(MISO)   </td><td class="markdownTableBodyNone">nc   </td><td class="markdownTableBodyNone">Only needed to read diagnostics from TFT (not implemented yet)    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">10   </td><td class="markdownTableBodyNone">T_CLK   </td><td class="markdownTableBodyNone">SPICLK   </td><td class="markdownTableBodyNone">Only needed to read for xpt2046 touchscreen(not implemented yet)    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">11   </td><td class="markdownTableBodyNone">T_CS   </td><td class="markdownTableBodyNone">SPICE1   </td><td class="markdownTableBodyNone">Only needed to read for xpt2046 touchscreen(not implemented yet)XPT2046 Chip select    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">12   </td><td class="markdownTableBodyNone">T_DIN   </td><td class="markdownTableBodyNone">SPIMOSI   </td><td class="markdownTableBodyNone">Only needed to read for xpt2046 touchscreen(not implemented yet)    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">13   </td><td class="markdownTableBodyNone">T_DO   </td><td class="markdownTableBodyNone">SPIMISO   </td><td class="markdownTableBodyNone">Only needed to read for xpt2046 touchscreen(not implemented yet)    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">14   </td><td class="markdownTableBodyNone">T_IRQ   </td><td class="markdownTableBodyNone">GPIO22   </td><td class="markdownTableBodyNone">Only needed to read for xpt2046 touchscreen(not implemented yet)   </td></tr>
</table>
<ol type="1">
<li>This is a 3.3V logic device do NOT connect the I/O logic lines to 5V logic device.</li>
<li>LED Backlight control is left to user.</li>
<li>Pins marked with T_ prefix are related to the touchscreen IC XP2046 if user is not using the touch screen do not connect these. The touch screen and TFT share the SPI bus but have different chip select lines. TFT SPI settings(Speed, active chip select) should be refreshed after ever read cycle of XPT2046 sensor, see example.</li>
</ol>
<h1><a class="anchor" id="autotoc_md29"></a>
Output</h1>
<p>Four-Byte Burger 240x320 16-bit bitmap test image, Credits <a href="https://www.youtube.com/watch?v=i4EFkspO5p4">Ahoy</a></p>
<p><a href="https://github.com/gavinlyonsrepo/Display_Lib_RPI/blob/main/extra/images/ili9341output2.jpg"><img src="https://github.com/gavinlyonsrepo/Display_Lib_RPI/blob/main/extra/images/ili9341output2.jpg" alt="output pic" class="inline"/></a> </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8
</small></address>
</body>
</html>
