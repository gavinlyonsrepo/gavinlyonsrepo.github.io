<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Display_Lib_RPI: ILI9341 LCD TFT Readme</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Display_Lib_RPI
   &#160;<span id="projectnumber">1.3.0</span>
   </div>
   <div id="projectbrief">A C++ Library to connect electronic displays to Raspberry Pi single board computers.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">ILI9341 LCD TFT Readme </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a href="https://github.com/gavinlyonsrepo/Display_Lib_RPI/blob/main/extra/images/ili9341.jpg"><img src="https://github.com/gavinlyonsrepo/Display_Lib_RPI/blob/main/extra/images/ili9341.jpg" alt="Image TFT" class="inline"/></a></p>
<h1><a class="anchor" id="autotoc_md34"></a>
Table of contents</h1>
<ul>
<li><a href="#overview">Overview</a></li>
<li><a href="#software">Software</a><ul>
<li><a href="#user-options">User Options</a></li>
<li><a href="#file-system">File system</a></li>
</ul>
</li>
<li><a href="#hardware">Hardware</a></li>
<li><a href="#output">Output</a></li>
<li><a href="#touchscreen">Touchscreen</a></li>
</ul>
<h1><a class="anchor" id="autotoc_md35"></a>
Overview</h1>
<ul>
<li>Name: <a class="el" href="classILI9341__TFT.html" title="Class to interface with ILI9341 LCD display.">ILI9341_TFT</a></li>
<li>Description:</li>
</ul>
<p>0. C++ Library for a TFT SPI LCD, ILI9341 Driver (might also work with ILI9340)</p><ol type="1">
<li>Dynamic install-able Raspberry Pi C++ library.</li>
<li>Inverse colour, rotate, scroll, modes supported.</li>
<li>Graphics + print class included.</li>
<li>24 bit colour , 16 bit color &amp; bi-color Bitmaps supported.</li>
<li>Hardware and Software SPI</li>
<li>Dependency: bcm2835 Library</li>
<li>Support for XPT2046 Touchscreen IC included</li>
</ol>
<ul>
<li>Author: Gavin Lyons</li>
</ul>
<h1><a class="anchor" id="autotoc_md36"></a>
Software</h1>
<h2><a class="anchor" id="autotoc_md37"></a>
User options</h2>
<p>In the example files. There are 3 sections in "Setup()" function where user can make adjustments to select for SPI type used, and screen size.</p>
<ol type="1">
<li>USER OPTION 1 GPIO/SPI TYPE</li>
<li>USER OPTION 2 SCREEN SECTION</li>
<li>USER OPTION 3 SPI SPEED , SPI_CE_PIN</li>
</ol>
<p><em>USER OPTION 1 SPI TYPE / GPIO</em></p>
<p>This library supports both Hardware SPI and software SPI. The TFTSetupGPIO function is overloaded(2 off one for HW SPI the other for SW SPI). The parameters set for TFTSetupGPIO define which is used. HW SPI is far faster and more reliable than SW SPI</p>
<p><em>USER OPTION 2 Screen size</em></p>
<p>User can adjust screen pixel height, screen pixel width The function TFTInitScreenSize sets them.</p>
<p><em>USER OPTION 3 SPI SPEED , SPI_CE_PIN</em></p>
<p>TFTInitSPI function is overloaded(2 off, one for HW SPI the other for SW SPI).</p>
<p>Param SPI_Speed (HW SPI Only)</p>
<p>Here the user can pass the SPI Bus freq in Hertz, Maximum 125 Mhz , Minimum 30Khz, The default in file is 8Mhz Although it is possible to select high speeds for the SPI interface, up to 125MHz, Don't expect any speed faster than 32MHz to work reliably. If you set to 0 .Speed is set to bcm2835 constant BCM2835_SPI_CLOCK_DIVIDER_32.</p>
<p>Param SPI_CE_PIN (HW SPI Only)</p>
<p>Which Chip enable pin to use two choices.</p><ul>
<li>SPICE0 = 0</li>
<li>SPICE1 = 1</li>
</ul>
<p>Param SPI_CommDelay (SW SPI Only)</p>
<p>The user can adjust If user is having reliability issues with SW SPI in some setups. This is a microsecond delay in SW SPI GPIO loop. It is set to 0 by default, Increasing it will slow down SW SPI further.</p>
<h2><a class="anchor" id="autotoc_md38"></a>
File system</h2>
<p>In example folder: The Main.cpp file contains tests showing library functions. A bitmap data file contains data for bi-color bitmaps and icons tests. The color bitmaps used in testing are in bitmap folder, 3 16-bit and 5 24-bit images.</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">#   </th><th class="markdownTableHeadNone">example file name   </th><th class="markdownTableHeadNone">Desc    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">1   </td><td class="markdownTableBodyNone">Hello_world   </td><td class="markdownTableBodyNone">Basic use case    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">2   </td><td class="markdownTableBodyNone">Text_Graphic_Functions   </td><td class="markdownTableBodyNone">Tests text,graphics &amp; function testing    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">3   </td><td class="markdownTableBodyNone">Bitmap_Tests   </td><td class="markdownTableBodyNone">bitmap + FPS testing    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">4   </td><td class="markdownTableBodyNone">Mandelbrot_set   </td><td class="markdownTableBodyNone">Drawing a mandelbrot set demo    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">5   </td><td class="markdownTableBodyNone">Touch_Screen   </td><td class="markdownTableBodyNone">Basic Touch screen demo    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">6   </td><td class="markdownTableBodyNone">xpt_Test   </td><td class="markdownTableBodyNone">Touch screen test without TFT   </td></tr>
</table>
<h1><a class="anchor" id="autotoc_md39"></a>
Hardware</h1>
<p>Tested and developed on:</p>
<ul>
<li>Size 2.4" SPI Serial IPS color TFT LCD</li>
<li>Resolution: 240 (H) RGB x 320 (V)</li>
<li>Color Depth: 262K/65K (65K used)</li>
<li>Control chip:ILI9341</li>
<li>Display area 27.972 (H) x 32.634 (V)</li>
<li>Panel size 36.72(W)X48.96(H)mm</li>
<li>Logic voltage 3.3V</li>
<li>Touch panel with XPT2046 IC</li>
</ul>
<p>Connections as setup in main.cpp test file.</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">PinNum   </th><th class="markdownTableHeadNone">Pin description   </th><th class="markdownTableHeadNone">RPI   </th><th class="markdownTableHeadNone">note    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">1   </td><td class="markdownTableBodyNone">VCC   </td><td class="markdownTableBodyNone">VCC   </td><td class="markdownTableBodyNone">3.3 or 5V ,CAUTION your display must have 3.3V regulator on back to connect to 5V    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">2   </td><td class="markdownTableBodyNone">GND   </td><td class="markdownTableBodyNone">GND   </td><td class="markdownTableBodyNone"></td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">3   </td><td class="markdownTableBodyNone">CS   </td><td class="markdownTableBodyNone">SPICE0   </td><td class="markdownTableBodyNone">TFT Chip select    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">4   </td><td class="markdownTableBodyNone">RESET   </td><td class="markdownTableBodyNone">GPIO25   </td><td class="markdownTableBodyNone">Reset, Use any GPIO for this, If no reset pin, pass -1 in here &amp; display will use software rst    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">5   </td><td class="markdownTableBodyNone">DC   </td><td class="markdownTableBodyNone">GPIO24   </td><td class="markdownTableBodyNone">Data or command, Use any GPIO for this line    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">6   </td><td class="markdownTableBodyNone">SDI(MOSI)   </td><td class="markdownTableBodyNone">SPIMOSI   </td><td class="markdownTableBodyNone"></td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">7   </td><td class="markdownTableBodyNone">SCLK   </td><td class="markdownTableBodyNone">SPICLK   </td><td class="markdownTableBodyNone"></td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">8   </td><td class="markdownTableBodyNone">LED   </td><td class="markdownTableBodyNone">VCC   </td><td class="markdownTableBodyNone">CAUTION Your display may need current limit resistor    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">9   </td><td class="markdownTableBodyNone">SDO(MISO)   </td><td class="markdownTableBodyNone">nc   </td><td class="markdownTableBodyNone">Only needed to read diagnostics from TFT (not implemented yet)    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">10   </td><td class="markdownTableBodyNone">T_CLK   </td><td class="markdownTableBodyNone">SPICLK   </td><td class="markdownTableBodyNone"></td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">11   </td><td class="markdownTableBodyNone">T_CS   </td><td class="markdownTableBodyNone">SPICE1   </td><td class="markdownTableBodyNone">XPT2046 Chip select    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">12   </td><td class="markdownTableBodyNone">T_DIN   </td><td class="markdownTableBodyNone">SPIMOSI   </td><td class="markdownTableBodyNone"></td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">13   </td><td class="markdownTableBodyNone">T_DO   </td><td class="markdownTableBodyNone">SPIMISO   </td><td class="markdownTableBodyNone"></td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">14   </td><td class="markdownTableBodyNone">T_IRQ   </td><td class="markdownTableBodyNone">GPIO22   </td><td class="markdownTableBodyNone"></td></tr>
</table>
<ol type="1">
<li>This is a 3.3V logic device do NOT connect the I/O logic lines to 5V logic device.</li>
<li>LED Backlight control is left to user.</li>
<li>Pins marked with T_ prefix are related to the touchscreen IC XP2046 if user is not using the touch screen do not connect these. The touch screen and TFT share the SPI bus but have different chip select lines. TFT SPI settings(Speed, active chip select) should be refreshed after ever read cycle of XPT2046 sensor, see example.</li>
</ol>
<h1><a class="anchor" id="autotoc_md40"></a>
Output</h1>
<p>Four-Byte Burger 240x320 16-bit bitmap test image, Credits <a href="https://www.youtube.com/watch?v=i4EFkspO5p4">Ahoy</a></p>
<p><a href="https://github.com/gavinlyonsrepo/Display_Lib_RPI/blob/main/extra/images/ili9341output2.jpg"><img src="https://github.com/gavinlyonsrepo/Display_Lib_RPI/blob/main/extra/images/ili9341output2.jpg" alt="output pic" class="inline"/></a></p>
<h1><a class="anchor" id="autotoc_md41"></a>
Touchscreen</h1>
<p>If the users display has a touchscreen controller IC on the back (XPT2046). A simple class to interface with the XPT2046 touchscreen controller IC has been included. Note :It may not be populated on your display or there may be a different model of IC there.</p>
<p>The T_IRQ line goes low when the touchscreen is touched and the data can be read from sensor.</p>
<p>Co-ord system returned by <a class="el" href="classXPT__2046__RDL.html" title="Class to interface hardware of Touch point IC XPT2046.">XPT_2046_RDL</a> class is as follows:</p>
<ol type="1">
<li>Top left : X = 1800 Y = 150</li>
<li>Top Right : X = 150 Y = 150</li>
<li>Bottom Left : X = 1800 Y = 1800</li>
</ol>
<ol type="1">
<li>Bottom Right : X = 150 Y = 1800</li>
</ol>
<p>Output of the basic touch screen example included.</p>
<p><a href="https://github.com/gavinlyonsrepo/Display_Lib_RPI/blob/main/extra/images/ili9341output.jpg"><img src="https://github.com/gavinlyonsrepo/Display_Lib_RPI/blob/main/extra/images/ili9341output.jpg" alt="output pic" class="inline"/></a> </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Wed Mar 20 2024 11:25:58 for Display_Lib_RPI by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
