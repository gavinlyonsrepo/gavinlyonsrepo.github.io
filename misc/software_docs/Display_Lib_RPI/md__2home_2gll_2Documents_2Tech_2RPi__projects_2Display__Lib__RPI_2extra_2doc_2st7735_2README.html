<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Display_Lib_RPI: ST7735 TFT Readme</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="logo.png"/></td>
  <td id="projectalign">
   <div id="projectname">Display_Lib_RPI<span id="projectnumber">&#160;2.4.2</span>
   </div>
   <div id="projectbrief">A C++ Library to connect electronic displays to Linux single board computers.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

</div><!-- top -->
<div><div class="header">
  <div class="headertitle"><div class="title">ST7735 TFT Readme</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="st7735-tft-readme"></a> <a href="https://github.com/gavinlyonsrepo/pic_16F18346_projects/blob/master/images/st7735/pcb.jpg"><img src="https://github.com/gavinlyonsrepo/pic_16F18346_projects/blob/master/images/st7735/pcb.jpg" alt=" Image TFT " class="inline"/></a></p>
<h1><a class="anchor" id="table-of-contents-11"></a>
Table of contents</h1>
<ul>
<li><a class="el" href="md__2home_2gll_2Documents_2Tech_2RPi__projects_2Display__Lib__RPI_2extra_2doc_2ch1115_2README.html#overview">Overview</a></li>
<li><a class="el" href="md__2home_2gll_2Documents_2Tech_2RPi__projects_2Display__Lib__RPI_2extra_2doc_2ch1115_2README.html#software">Software</a><ul>
<li><a class="el" href="md__2home_2gll_2Documents_2Tech_2RPi__projects_2Display__Lib__RPI_2extra_2doc_2gc9a01a_2README.html#user-options">User Options</a></li>
<li><a class="el" href="md__2home_2gll_2Documents_2Tech_2RPi__projects_2Display__Lib__RPI_2extra_2doc_2gc9a01a_2README.html#file-system">File system</a></li>
<li><a class="el" href="md__2home_2gll_2Documents_2Tech_2RPi__projects_2Display__Lib__RPI_2extra_2doc_2gc9a01a_2README.html#bitmap">Bitmap</a></li>
<li><a class="el" href="md__2home_2gll_2Documents_2Tech_2RPi__projects_2Display__Lib__RPI_2extra_2doc_2gc9a01a_2README.html#color-codes">Color codes</a></li>
<li>Advanced screen buffer mode</li>
</ul>
</li>
<li><a class="el" href="md__2home_2gll_2Documents_2Tech_2RPi__projects_2Display__Lib__RPI_2extra_2doc_2ch1115_2README.html#hardware">Hardware</a></li>
<li><a class="el" href="md__2home_2gll_2Documents_2Tech_2RPi__projects_2Display__Lib__RPI_2extra_2doc_2ch1115_2README.html#output">Output</a></li>
<li><a class="el" href="md__2home_2gll_2Documents_2Tech_2RPi__projects_2Display__Lib__RPI_2extra_2doc_2gc9a01a_2README.html#notes">Notes</a><ul>
<li><a class="el" href="md__2home_2gll_2Documents_2Tech_2RPi__projects_2Display__Lib__RPI_2extra_2doc_2gc9a01a_2README.html#error-99">Error 99</a></li>
</ul>
</li>
</ul>
<h1><a class="anchor" id="overview-11"></a>
Overview</h1>
<ul>
<li>Name: <a class="el" href="classST7735__TFT.html" title="Class to control ST7735 TFT basic functionality.">ST7735_TFT</a></li>
<li>Description:</li>
</ul>
<p>0. C++ Library for a TFT SPI LCD, ST7735 Driver</p><ol type="1">
<li>Dynamic install-able Linux based Single Board ComputersC++ library.</li>
<li>Inverse colour, rotate, sleep, idle &amp; vertical scroll modes supported.</li>
<li>Graphics + print class included.</li>
<li>24 bit colour , 16 bit color, bi-color Bitmaps &amp; sprites supported.</li>
<li>Hardware and Software SPI</li>
<li>Dependency: lgpio Library</li>
<li>NB The Spidev buffer size setting must be larger than biggest buffer the code will attempt to write If not you will get 'Error 99'. See Notes section for more details.</li>
<li>Make sure SPI is enabled in your computers configuration.</li>
</ol>
<ul>
<li>Author: Gavin Lyons</li>
<li>Port of my PIC library at <a href="https://github.com/gavinlyonsrepo/pic_16F18346_projects">github link.</a></li>
</ul>
<h1><a class="anchor" id="software-11"></a>
Software</h1>
<h2><a class="anchor" id="user-options-3"></a>
User options</h2>
<p>In the example files. There are 3 sections in "Setup()" function where user can make adjustments to select for SPI type used, PCB type used and screen size.</p>
<ol type="1">
<li>USER OPTION 1 GPIO/SPI TYPE</li>
<li>USER OPTION 2 SCREEN SECTION</li>
<li>USER OPTION 3 PCB_TYPE, + SPI SETTINGS</li>
</ol>
<p><em>USER OPTION 1 SPI TYPE / GPIO</em></p>
<p>This library supports both Hardware SPI and software SPI. The TFTSetupGPIO function is overloaded(2 off one for HW SPI the other for SW SPI). The parameters set for TFTSetupGPIO define which is used. HW SPI is far faster and more reliable than SW SPI</p>
<p><em>USER OPTION 2 Screen size + Offsets</em></p>
<p>User can adjust screen pixel height, screen pixel width and x &amp; y screen offsets. These offsets can be used in the event of screen damage or manufacturing errors around edge such as cropped data or defective pixels. The function TFTInitScreenSize sets them.</p>
<p><em>USER OPTION 3 PCB Version, SPI Settings</em></p>
<p>TFTInitPCBType function is overloaded(2 off, one for HW SPI the other for SW SPI).</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">parameter   </th><th class="markdownTableHeadNone">default value   </th><th class="markdownTableHeadNone">note   </th><th class="markdownTableHeadNone">SPi type    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">SWSPI_CommDelay   </td><td class="markdownTableBodyNone">0   </td><td class="markdownTableBodyNone">uS delay for GPIO to change speed   </td><td class="markdownTableBodyNone">software    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">HWSPI_DEVICE   </td><td class="markdownTableBodyNone">0   </td><td class="markdownTableBodyNone">A SPI device, &gt;= 0. which SPI interface to use , ls /dev/spi*   </td><td class="markdownTableBodyNone">Hardware    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">HWSPI_CHANNEL   </td><td class="markdownTableBodyNone">0   </td><td class="markdownTableBodyNone">A SPI channel, &gt;= 0. Which Chip enable pin to use usually 0 or 1   </td><td class="markdownTableBodyNone">Hardware    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">HWSPI_SPEED   </td><td class="markdownTableBodyNone">1000000   </td><td class="markdownTableBodyNone">The speed of serial communication in bits per second.   </td><td class="markdownTableBodyNone">Hardware    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">HWSPI_FLAGS   </td><td class="markdownTableBodyNone">0   </td><td class="markdownTableBodyNone">mode 0 for this device   </td><td class="markdownTableBodyNone">Hardware    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">GPIO_CHIP_DEVICE   </td><td class="markdownTableBodyNone">0   </td><td class="markdownTableBodyNone">gpio chip device &gt;= 0, check ls/dev/gpiochip*   </td><td class="markdownTableBodyNone">both    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">PCB_TYPE   </td><td class="markdownTableBodyNone">TFT_ST7735R_Red   </td><td class="markdownTableBodyNone">see table and text below   </td><td class="markdownTableBodyNone">Both   </td></tr>
</table>
<p>PCB_TYPE: In the main.cpp in USER OPTION 3 PCB_TYPE select your display type, by passing an enum type to function TFTInitPCBType. Default is "TFT_ST7735R_Red". There are 4 types of the ST7735 TFT display supported. If your display works but RGB colors are wrong you may have chosen wrong display type.</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Number   </th><th class="markdownTableHeadNone">Description   </th><th class="markdownTableHeadNone">Enum label   </th><th class="markdownTableHeadNone">Tested    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">1   </td><td class="markdownTableBodyNone">ST7735B controller   </td><td class="markdownTableBodyNone">TFT_ST7735B   </td><td class="markdownTableBodyNone">n/a    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">2   </td><td class="markdownTableBodyNone">ST7735R Green Tab   </td><td class="markdownTableBodyNone">TFT_ST7735R_Green   </td><td class="markdownTableBodyNone">n/a    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">3   </td><td class="markdownTableBodyNone">ST7735R Red Tab   </td><td class="markdownTableBodyNone">TFT_ST7735R_Red   </td><td class="markdownTableBodyNone">RED PCB v1.1, 1.44, 128x128 pixels    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">4   </td><td class="markdownTableBodyNone">ST7735S Black Tab   </td><td class="markdownTableBodyNone">TFT_ST7735S_Black   </td><td class="markdownTableBodyNone">RED PCB v1.2, 1.8, 128 x 160 pixels   </td></tr>
</table>
<h2><a class="anchor" id="file-system-7"></a>
File system</h2>
<p>In example folder: The Main.cpp file contains tests showing library functions. A bitmap data file contains data for bi-color bitmaps and icons tests. The color bitmaps used in testing are in bitmap folder, 3 16-bit and 5 24-bit images.</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">#   </th><th class="markdownTableHeadNone">example file name   </th><th class="markdownTableHeadNone">Desc    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">1   </td><td class="markdownTableBodyNone">hello_world   </td><td class="markdownTableBodyNone">Basic use case    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">2   </td><td class="markdownTableBodyNone">hello_world_SWSPI   </td><td class="markdownTableBodyNone">Basic use case fro software spi    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">3   </td><td class="markdownTableBodyNone">text_Graphic_Functions   </td><td class="markdownTableBodyNone">Tests text,graphics &amp; function testing    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">4   </td><td class="markdownTableBodyNone">bitmap_Tests   </td><td class="markdownTableBodyNone">bitmap    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">5   </td><td class="markdownTableBodyNone">framerate_test   </td><td class="markdownTableBodyNone">Frame rate per second (FPS)    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">6   </td><td class="markdownTableBodyNone">demos   </td><td class="markdownTableBodyNone">various demos   </td></tr>
</table>
<h2><a class="anchor" id="bitmap-3"></a>
Bitmap</h2>
<p>Functions to support drawing bitmaps</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Function Name   </th><th class="markdownTableHeadNone">Colour support   </th><th class="markdownTableHeadNone">Pixel size KiB   </th><th class="markdownTableHeadNone">Note    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">drawIcon   </td><td class="markdownTableBodyNone">bi-colour array   </td><td class="markdownTableBodyNone">(0-127) X 8   </td><td class="markdownTableBodyNone">Data vertically addressed    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">drawBitmap   </td><td class="markdownTableBodyNone">bi-colour array   </td><td class="markdownTableBodyNone">2   </td><td class="markdownTableBodyNone">Data horizontally addressed    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">drawBitmap16   </td><td class="markdownTableBodyNone">16 bit color 565 BMP files or array   </td><td class="markdownTableBodyNone">32   </td><td class="markdownTableBodyNone">---&mdash;    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">drawBitmap24   </td><td class="markdownTableBodyNone">24 bit color BMP files or array   </td><td class="markdownTableBodyNone">48   </td><td class="markdownTableBodyNone">Converted by software to 16-bit color    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">drawSprite   </td><td class="markdownTableBodyNone">16 bit color 565 array   </td><td class="markdownTableBodyNone">32   </td><td class="markdownTableBodyNone">Does not use a buffer , draws pixel by pixel , ignores background chosen color   </td></tr>
</table>
<ol type="1">
<li>Bitmap Size (in KiB)= Image Width×Image Height×Bits Per Pixel(8×1024)</li>
<li>Pixel size column assumes 128 by 128 screen.</li>
<li>The data array for 1 and 2 is created from image files using file data conversion tool <a href="https://javl.github.io/image2cpp/">link</a></li>
<li>The data array for 3 - 5 is created from BMP files using file data conversion tool <a href="https://notisrac.github.io/FileToCArray/">link</a></li>
<li>For 3 and 4 better just to use bmp files direct from file system see examples.</li>
</ol>
<p>These class functions will return an error code in event of error see API for more details.</p>
<h2><a class="anchor" id="color-codes-3"></a>
Color codes</h2>
<p>For functions that accept a 16 bit color value. There is list of pre-defined colors in the 'colors' folder in doc.</p>
<h2><a class="anchor" id="advanced-screen-buffer-mode-3"></a>
Advanced screen buffer mode</h2>
<p>Advanced screen buffer mode. There is advanced buffer mode where the code writes to a global screen buffer instead of the VRAM of display. It is off by default more details at readme, which is in the 'doc' folder <a class="el" href="md__2home_2gll_2Documents_2Tech_2RPi__projects_2Display__Lib__RPI_2extra_2doc_2buffer__mode_2README.html">at link.</a></p>
<h1><a class="anchor" id="hardware-11"></a>
Hardware</h1>
<p>Connections as setup in main.cpp test file.</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">TFT PinNum   </th><th class="markdownTableHeadNone">Pindesc   </th><th class="markdownTableHeadNone">RPI HW SPI   </th><th class="markdownTableHeadNone">RPI SW SPI    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">1   </td><td class="markdownTableBodyNone">LED   </td><td class="markdownTableBodyNone">VCC   </td><td class="markdownTableBodyNone">VCC    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">2   </td><td class="markdownTableBodyNone">SCLK   </td><td class="markdownTableBodyNone">SPI_CLK   </td><td class="markdownTableBodyNone">GPIO6    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">3   </td><td class="markdownTableBodyNone">SDA   </td><td class="markdownTableBodyNone">SPI_MOSI   </td><td class="markdownTableBodyNone">GPIO5    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">4   </td><td class="markdownTableBodyNone">A0/DC   </td><td class="markdownTableBodyNone">GPIO24   </td><td class="markdownTableBodyNone">GPIO24    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">5   </td><td class="markdownTableBodyNone">RESET   </td><td class="markdownTableBodyNone">GPI025   </td><td class="markdownTableBodyNone">GPIO25    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">6   </td><td class="markdownTableBodyNone">SS/CS   </td><td class="markdownTableBodyNone">SPI_CE0   </td><td class="markdownTableBodyNone">GPI21    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">7   </td><td class="markdownTableBodyNone">GND   </td><td class="markdownTableBodyNone">GND   </td><td class="markdownTableBodyNone">GND    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">8   </td><td class="markdownTableBodyNone">VCC   </td><td class="markdownTableBodyNone">VCC   </td><td class="markdownTableBodyNone">VCC   </td></tr>
</table>
<ol type="1">
<li>Connect LED backlight pin 1 thru a 150R/220R ohm resistor to 3.3/5V VCC.</li>
<li>This is a 3.3V logic device do NOT connect the I/O logic lines to 5V logic device.</li>
<li>You can connect VCC to 5V if there is a 3.3 volt regulator on back of TFT module.</li>
<li>Pick any GPIO you want for SW SPI for HW SPI: reset and DC lines are flexible.</li>
<li>User can select SPI_CE0 or SPI_CE1 for HW SPI</li>
<li>Backlight control is left to user.</li>
</ol>
<p><a href="https://github.com/gavinlyonsrepo/ST7735_TFT_RPI/blob/main/extra/images/wiring.jpg"><img src="https://github.com/gavinlyonsrepo/ST7735_TFT_RPI/blob/main/extra/images/wiring.jpg" alt=" Wiring pic " class="inline"/></a></p>
<h1><a class="anchor" id="output-8"></a>
Output</h1>
<ol type="1">
<li>Clock Demo showing icons, small bitmaps</li>
<li>24-bit color bitmap test image</li>
<li>16-bit color bitmap test image</li>
</ol>
<p><a href="https://github.com/gavinlyonsrepo/ST7735_TFT_RPI/blob/main/extra/images/4.jpg"><img src="https://github.com/gavinlyonsrepo/ST7735_TFT_RPI/blob/main/extra/images/4.jpg" alt=" Demo pic " class="inline"/></a> <a href="https://github.com/gavinlyonsrepo/Display_Lib_RPI/blob/main/extra/images/st7735output.jpg"><img src="https://github.com/gavinlyonsrepo/Display_Lib_RPI/blob/main/extra/images/st7735output.jpg" alt=" demo pic 2" class="inline"/></a></p>
<h1><a class="anchor" id="notes-3"></a>
Notes</h1>
<h2><a class="anchor" id="error-99-3"></a>
Error 99</h2>
<p><a class="el" href="md__2home_2gll_2Documents_2Tech_2RPi__projects_2Display__Lib__RPI_2extra_2doc_2error__99_2README.html">Error 99 Documentation</a> </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8
</small></address>
</body>
</html>
