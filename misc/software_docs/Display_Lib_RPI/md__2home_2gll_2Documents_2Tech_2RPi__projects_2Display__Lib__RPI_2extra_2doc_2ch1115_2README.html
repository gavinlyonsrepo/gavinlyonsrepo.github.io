<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Display_Lib_RPI: ERM CH1115 OLED Readme</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="logo.png"/></td>
  <td id="projectalign">
   <div id="projectname">Display_Lib_RPI<span id="projectnumber">&#160;2.3.0</span>
   </div>
   <div id="projectbrief">A C++ Library to connect electronic displays to Linux single board computers.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

</div><!-- top -->
<div><div class="header">
  <div class="headertitle"><div class="title">ERM CH1115 OLED Readme</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="erm-ch1115-oled-readme"></a> <a href="https://github.com/gavinlyonsrepo/ER_OLEDM1_CH1115/blob/main/extras/image/oled.jpg"><img src="https://github.com/gavinlyonsrepo/ER_OLEDM1_CH1115/blob/main/extras/image/oled.jpg" alt=" OLED image" class="inline"/></a></p>
<h1><a class="anchor" id="table-of-contents"></a>
Table of contents</h1>
<ul>
<li><a class="el" href="md__2home_2gll_2Documents_2Tech_2RPi__projects_2Display__Lib__RPI_2extra_2doc_2ch1115_2README.html#overview">Overview</a></li>
<li><a class="el" href="md__2home_2gll_2Documents_2Tech_2RPi__projects_2Display__Lib__RPI_2extra_2doc_2ch1115_2README.html#output">Output</a></li>
<li><a class="el" href="md__2home_2gll_2Documents_2Tech_2RPi__projects_2Display__Lib__RPI_2extra_2doc_2ch1115_2README.html#hardware">Hardware</a></li>
<li><a class="el" href="md__2home_2gll_2Documents_2Tech_2RPi__projects_2Display__Lib__RPI_2extra_2doc_2ch1115_2README.html#software">Software</a><ul>
<li><a class="el" href="md__2home_2gll_2Documents_2Tech_2RPi__projects_2Display__Lib__RPI_2extra_2doc_2ch1115_2README.html#spi">SPI</a></li>
<li><a class="el" href="md__2home_2gll_2Documents_2Tech_2RPi__projects_2Display__Lib__RPI_2extra_2doc_2ch1115_2README.html#bitmaps">Bitmaps</a></li>
<li><a class="el" href="md__2home_2gll_2Documents_2Tech_2RPi__projects_2Display__Lib__RPI_2extra_2doc_2ch1115_2README.html#user-adjustments">User adjustments</a></li>
</ul>
</li>
</ul>
<h1><a class="anchor" id="overview"></a>
Overview</h1>
<ul>
<li>Name : ER_OLEDM1_CH1115</li>
<li>Description :</li>
</ul>
<p>0. C++ Library to support the ER-OLEDM1.09-1 128X64 OLED Display Module driven by the CH1115 controller.</p><ol type="1">
<li>Linux based Single Board Computers C++ library.</li>
<li>Inverse colour, vertical rotate, sleep, fade effect, horizontal scroll and contrast control.</li>
<li>Bitmaps supported.</li>
<li>Hardware and Software SPI</li>
</ol>
<ul>
<li>Author: Gavin Lyons</li>
<li>Port of my Arduino <a href="https://github.com/gavinlyonsrepo/ER_OLEDM1_CH1115">library link</a>.</li>
</ul>
<h1><a class="anchor" id="output"></a>
Output</h1>
<p><a href="https://github.com/gavinlyonsrepo/ER_OLEDM1_CH1115_PICO/blob/main/extra/image/all.jpg"><img src="https://github.com/gavinlyonsrepo/ER_OLEDM1_CH1115_PICO/blob/main/extra/image/all.jpg" alt=" output image " class="inline"/></a></p>
<h1><a class="anchor" id="hardware"></a>
Hardware</h1>
<p>CH1115 is a single-chip CMOS OLED driver with controller for organic light emitting diode dot-matrix graphic display system. CH1115 consists of 128 segments, 64 commons that can support a maximum display resolution of 128 X 64. It is designed for Common Cathode type OLED panel. ER-OLEDM1.09-1W-SPI is a White 1.09 inch OLED Display Panel with Breakout Board. This module is a combination of the two.(controller and OLED)</p>
<p>For SWSPI pick any GPIO you want for the 5 control lines.</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">pin no   </th><th class="markdownTableHeadNone">GPIO HWSPI   </th><th class="markdownTableHeadNone">pin name   </th><th class="markdownTableHeadNone">pin desc    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">1   </td><td class="markdownTableBodyNone">n/a   </td><td class="markdownTableBodyNone">Gnd   </td><td class="markdownTableBodyNone">Ground    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">2   </td><td class="markdownTableBodyNone">n/a   </td><td class="markdownTableBodyNone">VCC   </td><td class="markdownTableBodyNone">voltage supply    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">3   </td><td class="markdownTableBodyNone">SPISCLK GPIO 11   </td><td class="markdownTableBodyNone">SCL   </td><td class="markdownTableBodyNone">Serial clock input    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">4   </td><td class="markdownTableBodyNone">SPIMOSI GPIO 10   </td><td class="markdownTableBodyNone">SDA   </td><td class="markdownTableBodyNone">Serial data input    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">5   </td><td class="markdownTableBodyNone">Any you want   </td><td class="markdownTableBodyNone">RES   </td><td class="markdownTableBodyNone">This pin is reset signal input.    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">6   </td><td class="markdownTableBodyNone">Any you want   </td><td class="markdownTableBodyNone">DC   </td><td class="markdownTableBodyNone">This pin is Data or Command control pin.    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">7   </td><td class="markdownTableBodyNone">SPICEO GPIO 8   </td><td class="markdownTableBodyNone">CS   </td><td class="markdownTableBodyNone">This pin is the chip select input.   </td></tr>
</table>
<p><a href="https://github.com/gavinlyonsrepo/Display_Lib_RPI/blob/main/extra/images/ch1115.png"><img src="https://github.com/gavinlyonsrepo/Display_Lib_RPI/blob/main/extra/images/ch1115.png" alt=" wiring " class="inline"/></a></p>
<h1><a class="anchor" id="software"></a>
Software</h1>
<p>Example files :</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Examples files main.cpp   </th><th class="markdownTableHeadNone">Description    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">hello_world   </td><td class="markdownTableBodyNone">Hello world , Basic usage    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">bitmap   </td><td class="markdownTableBodyNone">Shows use of bitmaps methods    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">text_graphics_functions   </td><td class="markdownTableBodyNone">Fonts graphics + misc functions    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">framerate_test   </td><td class="markdownTableBodyNone">Frames per second test    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">framerate_test_swspi   </td><td class="markdownTableBodyNone">Frames per second test but with software SPI setup   </td></tr>
</table>
<h2><a class="anchor" id="spi"></a>
SPI</h2>
<p>This library supports both Hardware SPI and software SPI. The constructor of the main class is overloaded. Which SPI is started depends on which constructor called by user.</p>
<p><em>Software SPI</em></p>
<p>For Software SPI Pick any GPIO you want. To get the number for GPIO_CHIP_DEVICE parameter you can check ls /dev/gpiochip* At time of testing it was found that Raspberry pi 5 = 4 and raspberry pi 3 = zero But now it look like both are zero after software update, although 4 should still work for RPi5 if a symlink is in /dev/ folder. The member OLEDHighFreqDelay is a GPIO uS delay that can be used to slow down or speed up Software SPI. By default it is set to 0uS. It may have to be increased depending on device/CPU used.</p>
<p><em>Hardware SPI</em></p>
<p>For Hardware SPI the User must use fixed SPI pins SPIMOSI and SPISCLK, user can choice between SPICE0 and SPICE1 for chip select. In hardware SPI user can pick SPI bus speed. SPI must be turned on device.</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">parameter   </th><th class="markdownTableHeadNone">default value   </th><th class="markdownTableHeadNone">note    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">HWSPI_DEVICE   </td><td class="markdownTableBodyNone">0   </td><td class="markdownTableBodyNone">A SPI device, &gt;= 0. which SPI interface to use , ls /dev/spi*    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">HWSPI_CHANNEL   </td><td class="markdownTableBodyNone">0   </td><td class="markdownTableBodyNone">A SPI channel, &gt;= 0. Which Chip enable pin to use usually 0 or 1    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">HWSPI_SPEED   </td><td class="markdownTableBodyNone">1000000   </td><td class="markdownTableBodyNone">The speed of serial communication in bits per second.    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">HWSPI_FLAGS   </td><td class="markdownTableBodyNone">0   </td><td class="markdownTableBodyNone">mode 0 for this device    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">GPIO_CHIP_DEVICE   </td><td class="markdownTableBodyNone">0   </td><td class="markdownTableBodyNone">gpio chip device &gt;= 0, check ls /dev/gpiochip*   </td></tr>
</table>
<h2><a class="anchor" id="bitmaps"></a>
Bitmaps</h2>
<p>There is a few different ways of displaying bitmaps,</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Num   </th><th class="markdownTableHeadNone">Method   </th><th class="markdownTableHeadNone">Data addressing   </th><th class="markdownTableHeadNone">Note    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">1   </td><td class="markdownTableBodyNone">OLEDBitmap()   </td><td class="markdownTableBodyNone">Vertical   </td><td class="markdownTableBodyNone">Writes directly to screen , no buffer used.    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">2   </td><td class="markdownTableBodyNone">OLEDBufferScreen()   </td><td class="markdownTableBodyNone">Vertical   </td><td class="markdownTableBodyNone">For internal use mostly    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">3   </td><td class="markdownTableBodyNone">drawBitmap()   </td><td class="markdownTableBodyNone">Vertical   </td><td class="markdownTableBodyNone">default, setDrawBitmapAddr(true)    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">4   </td><td class="markdownTableBodyNone">drawBitmap()   </td><td class="markdownTableBodyNone">Horizontal   </td><td class="markdownTableBodyNone">setDrawBitmapAddr(false)   </td></tr>
</table>
<p>The drawBitmap method will return an error if : The Bitmap is completely off screen , Invalid Bitmap pointer object, bitmap bigger than screen , bitmap bigger/smaller than provided width and height calculation ( This helps prevents buffer overflow). A vertical addressed Bitmap's height must be divisible by 8. eg, for a full screen bitmap with width=128 and height=64. Bitmap excepted size = 128 * (64/8) = 1024 bytes. A horizontal addressed Bitmap's width must be divisible by 8. eg, for a bitmap with width=88 and height=48. Bitmap excepted size = (88/8) * 48 = 528 bytes.</p>
<p>Bitmaps can be turned to data <a href="https://javl.github.io/image2cpp/">here at link</a> See example file "BITMAP" for more details.</p>
<h2><a class="anchor" id="user-adjustments"></a>
User adjustments</h2>
<p>When the user calls OLEDbegin() to start OLED they can specify a contrast setting from 0x00 to 0xFF. Datasheet says 0x80 is default. User can also change contrast on the fly. Screen can be disabled to enter a sleep type mode where OLED draws 500uA. Screen pixel colour can be inverted and also screen can be vertically rotated.</p>
<p>There is a "fade or breath display effect". Whose parameters(time brightness) can be adjusted by passing data to function see "OLEDfadeEffect" function header in .cpp and datasheet for details. default is 0x81.</p>
<p>There is a Horizontal scroll effect. Whose parameters(TimeInterval , direction , mode) can be adjusted by passing data to function see "OLEDscrollSetup" function header in .cpp and datasheet for details. defaults are in header file are 6 frames , right , continuous mode. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8
</small></address>
</body>
</html>
